#!/bin/bash

source incl.sh

# Set Script base directory
	_base_dir() {
		_install_dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
	}

# Pool Menu
	pool_menu()  {
		## Header
			HEADING="Pool Controller"
		## Write out the menu options array
			### Use Double Quotes for Text
				l0=(
					"Circuit Status"
					"Circuit Toogle"
					"nodejs-poolController install"
					"nodejs-poolController service setup"
					"Return"
				)
		## Map Menu to command Array
			### Use Single Quotes for Commands
				opt0=(
					'circuit_status_fn'
					'circuit_toggle_fn'
					'_pool_controller_install'
					'_pool_controller_service_install'
					'main_menu'
					)
		## Execute Menu Function
			g_menu_fn
	}

# systemd service management menu
	systemd_menu()  {
		## Header
			HEADING="systemd service management"
		## Write out the menu options array
			### Use Double Quotes for Text
				l0=(
					"systemd service status"
          "systemd service restart"
          "systemd service enable"
          "systemd service disable"
          "systemd service start"
          "systemd service stop"
          "systemd daemon reload"
					"Return"
				)
		## Map Menu to command Array
			### Use Single Quotes for Commands
				opt0=(
					'_systemd_service_status'
          '_systemd_service_restart'
          '_systemd_service_enable'
          '_systemd_service_disable'
          '_systemd_service_start'
          '_systemd_service_stop'
          '_systemd_reload_daemon'
					'main_menu'
					)
		## Execute Menu Function
			g_menu_fn
	}

# Main Menu
	main_menu()  {
		## Header
			HEADING="HomePi"
		## Write out the menu options array
			### Use Double Quotes for Text
				l0=(
					"Update Raspbian-Lite"
					"Install Dependencies"
					"NodeJS install"
					"Install Homebridge"
					"Install systemd Homebridge service files"
					"Install HomeBridge config.json"
					"Start HomeBridge services"
					"Show HomeBridge Service Status"
					"FAAC GPIO Door Opener"
					"npm extra installations"
					"Pool PI Menu"
					"systemd Service Management"
					"Exit"
				)
		## Map Menu to command Array
			### Use Single Quotes for Commands
				opt0=(
					'_base_update'
					'_depends_install'
					'_node_install'
					'_install_homebridge_main'
					'_homebridge_defaults_setup'
					'_config_json_setup'
					'_start_homebridge_fn'
					'_service_status'
					'_faac_install'
					'_node_extras_setup'
					'pool_menu'
					'systemd_menu'
					'exit'
					)
		## Execute Menu Function
			g_menu_fn
	}
# Set Script _base_dir
	_base_dir
# Execute set color function
 _set_colors
# Execute super user test
 _su_test
# Execute main menu
	main_menu
